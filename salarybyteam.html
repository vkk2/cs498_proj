<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>2017-2018 NBA Team Salary</title>
    
    <style>
        body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            position: relative;
            width: 960px;
        }
        .axis text {
            font: 10px sans-serif;
        }
        .axis path,
        .axis line {
            fill: none;
            stroke: #000;
            shape-rendering: crispEdges;
        }
        .bar {
            //fill: steelblue;
            fill-opacity: .9;
        }
        .x.axis path {
            display: none;
        }
        label {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        rect:hover {
            fill: orange;
        }
        rect {
            -moz-transition: all 0.3s;
            -o-transition: all 0.3s;
            -webkit-transition: all 0.3s;
            transition: all 0.3s;
        }

        #tooltip {
            position: absolute;
            width: 200px;
            height: auto;
            padding: 10px;
            background-color: rgb(220, 228, 223);
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            border-radius: 10px;
            -webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
            -moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
            box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
            pointer-events: none;
        }

        #tooltip.hidden {
            display: none;
        }

        #tooltip p {
            margin: 0;
            font-family: sans-serif;
            font-size: 16px;
            line-height: 20px;
        }
		.title {
		font-size: 1.8em;
		fill: #635F5D;
		}
		.axis-label {
		font-size: 1.8em;
		fill: #635F5D;
		}

    </style>
</head>

<body style="font-family:'Times New Roman', Times, serif;">
        <p>
            Chart Below shows each team sorted by Salary.<br><br>
        </p>

    <script src='https://d3js.org/d3.v5.min.js'></script>
    <script>
        
			var margin = {top: 50, right: 20, bottom: 100, left: 150},
				width = 1260 - margin.left - margin.right,
				height = 600 - margin.top - margin.bottom;
        //var format = d3.format(".0");
		//var format = d3.format("s");

		var x=d3.scaleBand().rangeRound([0, width]).padding(0.1);
        var y = d3.scaleLinear().rangeRound([height, 0]);
		var color = d3.scaleOrdinal().range(["#ff1a55","#83a0a6","#d7bdee","#0000ff","#ffdab9","#aaaaaa",
												"#b55ff6","#ffd700","#afeeee","#008000","#0ba0e3",
												"#6e8692","#7000f8","#3d3d3d","#f6cd37","#ff0000",
												"#81f67d","#c1442e","#bbc2c8","#d11e5d","#514d5b",
												"#b297ba","#78b0df","#969dff","#ffa500","#ff9bdc",
												"#ffd700","#ff9a9a","#e18a7a","4b0082"]).domain(["ATL", "BOS", "BRK", "CHI", "CHO", "CLE", "DAL", "DEN", "DET", "GSW", "HOU", "IND", 
																												"LAC", "LAL", "MEM", "MIA", "MIL", "MIN", "NOP", "NYK", "OKC", "ORL", "PHI", "PHO", 
																												"POR", "SAC", "SAS", "TOR", "UTA", "WAS"]);
		const title='Salary Of each NBA Team';																						
																									
		var render=data => {
			
            x.domain(data.map(function(d) { return d.TEAM; }));
            y.domain([50000000, d3.max(data, function(d) { return d.VALUE; })]);
            const gxaxis=svg.append("g")
                .attr("class", "x axis")
				.attr("transform", `translate(${0}, ${height})`)
                .call(d3.axisBottom(x));

			gxaxis.append('text')
				.attr('class', 'axis-label')
				//.attr('font-size', 5em)
				.attr("y",50)
				//.attr("x",800)
				.attr("x",(width-margin.right)/2)
				//.attr("fill","black")
				.text('Team');					
				
            const gyaxis=svg.append("g")
                .attr("class", "y axis")
                .call(d3.axisLeft(y))

			gyaxis.append('text')
				.attr('class', 'axis-label')
				.attr("y",0)
				.attr("x",0)
				//.attr("x",(width-margin.right)/2)
				.attr("fill","black")
				.text('Salary');
				//.attr("transform",rotate(-90));	

            svg.selectAll(".bar")
                .data(data)
                .enter().append("rect")
                .attr("class", "bar")
                .attr("x", function(d) { return x(d.TEAM); })
				.attr("width", x.bandwidth())
                .attr("y", function(d) { return y(d.VALUE); })
				.attr("fill",function(d,i){return color(i)})
                .attr("height", function(d) { return height - y(d.VALUE); })
			
                .on("mouseover", function(d) {

                    //x and y position
                    var xPosition = parseFloat(d3.select(this).attr("x")) ;
                    var yPosition = parseFloat(d3.select(this).attr("y")) / 2 ;

                    //Update the tooltip position and value
                    d3.select("#tooltip")
                        .style("left", xPosition + "px")
                        .style("top", yPosition + "px")						
                        .select("#value")
                        .text(d);

                    //make tooltip visible
                    d3.select("#tooltip").classed("hidden", false);
                })
                .on("mouseout", function() {
                    //hide tooltip
                    d3.select("#tooltip").classed("hidden", true);
                })
                .append("title")
                .text(function(d) {
                    return "Salary:- "+d.VALUE;
                    });
			svg.append('text')
				.attr('class', 'title')
				.attr("y",-10)
				.attr("x",(width-margin.right)/2)
				.text(title);

		};
		
        var svg = d3.select("body")
			.append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
			.append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
			
        d3.csv("https://raw.githubusercontent.com/vkk2/cs498_proj/master/teamsalarywinsorted.csv").then(data => {
            data.forEach(d=> {
                d.VALUE = +d.Salary;
                d.TEAM =  d["Tm"];
            });
			//data.sort(function(a,b){ return b.VALUE-a.VALUE});
			render(data);

        });
    </script>
	
        <p>
			
            GSW, OKC, WAS have the most salaries<br>
            
			<br>Click Next to see if these salaries results in wins.
			<br>Click Previous to back to overiew
			<a href="https://vkk2.github.io/cs498_proj/index.html" class="previous">&laquo; Previous</a>
            <a href="https://vkk2.github.io/cs498_proj/winvssalary.html" class="next">Next &raquo;</a><br><br>
        </p>
</body>
</html>